# vim: filetype=zsh
# vim: syntax=zsh

# Hostname (for use with `rcm`)
export HOSTNAME="${HOSTNAME:-netbook}"

# export PAGER="most"
# Taken from https://www.reddit.com/r/vim/comments/1l304v/use_vim_as_alternative_to_less/
# LESS options:
# (Note that colored manpages are generated by a zsh plugin)
# -R = Nicer highlighting
# -x4 = Set tab stops to 4 spaces.
# -F = Don't open with less if entire file fits on screen.
# -R = Output "raw" control characters. (colors)
# -s = Squeeze multiple blank lines.
# -X = Ignore termcap initialization. With xterms it keeps
#        the last page of the document on the screen. (see
#        http://www.shallowsky.com/linux/noaltscreen.html)
export PAGER="less"
export LESS="-x4RFs"

if [ -f "/usr/share/source-highlight/src-hilite-lesspipe.sh" ]; then
    # ubuntu 12.10: sudo apt-get install source-highlight
    export LESSOPEN="| /usr/share/source-highlight/src-hilite-lesspipe.sh %s"
elif [ -f "/usr/bin/src-hilite-lesspipe.sh" ]; then
    # fedora 18: sudo yum install source-highlight
    export LESSOPEN="| /usr/bin/src-hilite-lesspipe.sh %s"
fi

# ripgrep config file
export RIPGREP_CONFIG_PATH="$HOME/.ripgreprc"

# Special files
export CONFIG="$HOME/.local.config"
export ALIAS="$HOME/.local-aliases.sh"
export INSTALLED="$HOME/.local-install.sh"
export RCRC="$HOME/.rcrc"
export HISTORY="$HOME/.zsh_history"
export ZSHRC="$HOME/.zshrc"
export FZFRC="$HOME/.fzfrc"
export RGRC="$RIPGREP_CONFIG_PATH"
export NVIM_PLUGINS="${DOTFILES}/host-${HOSTNAME}/config/nvim/plugins.vim"
export NVIM_INIT="${DOTFILES}/host-${HOSTNAME}/config/nvim/init.vim"

# oh-my-zsh
export ZSH="$HOME/.oh-my-zsh"

# Reddit
export TUIR_EDITOR="nvim"
export TUIR_BROWSER="w3m"
export TUIR_URLVIEWER="urlscan"

# Default editors
export EDITOR=nvim
export VISUAL=nvim

# Haskell
export PATH="$HOME/.cabal/bin:$PATH"                  

# PHP
export PATH="$HOME/.config/composer/vendor/bin:$PATH" # PHP

# Golang
export GOPATH="$HOME/go"                              
export PATH="$HOME/go/bin:$PATH"                      
export GO_VERSION="1.16.5"

# FZF default
export FZF_BASE="$(dirname <<< realpath "$(which fzf)")/../shell"
if [[ -f "$HOME/.fzfrc" ]]; then
    source "$HOME/.fzfrc"
else
    export FZF_DEFAULT_OPTS='-m --height 50% --border'
    if type fd &> /dev/null; then
        export FZF_DEFAULT_COMMAND="fd --type file --follow --hidden --color=always"
    elif type rg &> /dev/null; then
        export FZF_DEFAULT_COMMAND="rg -p --hidden --files"
    fi
fi

# Python (for local modules)
export PYTHONPATH="$HOME/Documents/Python/Utilities:$PYTHONPATH"

# Rubygems and NPM packages
export PATH="$HOME/.gem/ruby/bin:$PATH"
export PATH="$HOME/node_modules:$PATH"

# Rust
export PATH="$HOME/.cargo/bin:$PATH"
export CARGO="$HOME/.cargo"

# Repos
export PYTHON_REPO="$HOME/Source/python-github"
export PAPIS_LIBRARY="$HOME/Documents/Papis-Imports"
export TEX_REPO="$HOME/texmf/tex/latex/antimike"
export SOURCE_DIR="$HOME/Source"
export DOTFILES="$HOME/.dotfiles"
export SPRING_2021="$HOME/Documents/spring-2021"
export ADMINISTRATIVE="$HOME/Documents/Administrative"
export ARCHIVE="$HOME/Documents/Archivebox"
export CHEAT="$HOME/.config/cheat/cheatsheets"

# Dotbare config
export DOTBARE_DIR="${DOTFILES}/.git"
export DOTBARE_TREE="$DOTFILES"
# Defaults---see FZF docs for more options
export DOTBARE_KEY="
  --bind=alt-a:toggle-all       # toggle all selection
  --bind=alt-j:jump             # label jump mode, sort of like vim-easymotion
  --bind=alt-0:top              # set cursor back to top
  --bind=alt-s:toggle-sort      # toggle sorting
  --bind=alt-t:toggle-preview   # toggle preview
"
export DOTBARE_DIFF_PAGER="delta"

function zvm_init_fzf() {
    [ -f $HOME/.fzf.zsh ] && source $HOME/.fzf.zsh
}

# Bibtex source for FZF
export FZF_BIBTEX_CACHEDIR="$HOME/.fzf_bibtex_cache"
export FZF_BIBTEX_SOURCES="$PAPIS_LIBRARY/library.bib"

# Marker (command-line palette)
export MARKER_SOURCE="$HOME/.local/share/marker/marker.sh"

# Tempdir for zsh-vi-mode plugin
export ZVM_TMPDIR="$HOME/.vim/tmp"
