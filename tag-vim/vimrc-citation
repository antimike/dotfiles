let g:citation_vim_bibtex_file=""
let g:citation_vim_mode="zotero"
let g:citation_vim_zotero_path=""
let g:citation_vim_zotero_version=5
"let g:citation_vim_zotero_attachment_path=""
let g:citation_vim_collection=''
let g:citation_vim_cache_path='~/.vim/citation-cache'
let g:citation_vim_outer_prefix="["
let g:citation_vim_inner_prefix="@"
let g:citation_vim_suffix="]"
let g:citation_vim_et_al_limit=5
"let g:citation_vim_reverse_order=0

" Customize unite display
" let g:citation_vim_description_format = "{}: {} '{}' -{}-"
" let g:citation_vim_description_fields = ["key", "author", "doi",
" "journal"]
" TODO: Copy / paste delimiter characters from github page and edit
" according to preference
 
" Insert a citation
nnoremap <silent>[unite]c	:<C-u>Unite -buffer-name=citation-start-insert -default-action=append	citation/key<cr>

" Immediately open cited file under cursor
nnoremap <silent>[unite]co :<C-u>Unite -input=<C-R><C-W> -default-action=start -force-immediately citation/file<cr>

" Open a URL from a citation under the cursor
nnoremap <silent><leader>cu :<C-u>Unite -input=<C-R><C-W> -default-action=start -force-immediately citation/url<cr>

" Browse folder from citation under cursor
nnoremap <silent>[unite]cf :<C-u>Unite -input=<C-R><C-W> -default-action=file -force-immediately citation/file<cr>

" View all citation information from citation under cursor
nnoremap <silent>[unite]ci :<C-u>Unite -input=<C-R><C-W> -default-action=preview -force-immediately citation/combined<cr>

" Preview, append, yank arbitrary citation data (TODO: edit)
"nnoremap <silent>[unite]cp :<C-u>Unite -default-action=yank citation/replace_this<cr>

" Integrate with zotcli for note editing
nnoremap <silent><leader>cn :<C-u>UniteWithCursorWord -default-action=yank -force-immediately citation/title<cr><cr>:!zotcli add-note "<C-R>0"<cr>

" Search for the word under the cursor
nnoremap <silent>[unite]cs :<C-u>Unite -default-action=yank citation/key:<C-R><C-W><cr>

" Search for selected words in visual mode (escape spacees)
vnoremap <silent>[unite]cs :<C-u>exec "Unite -default-action=start citation/key:" . escape(@*,' ') <cr>

nnoremap <silent>[unite]cx :<C-u>exec "Unite -default-action=start citation/key:" . escape(input('Search Key : '), ' ') <cr>

augroup citation-autocmds
	autocmd FileType unite call s:unite_my_settings()
	function! s:unite_my_settings()
		nnoremap 	<silent><buffer><expr> <C-o> unite#do_action('start')
		imap		<silent><buffer><expr> <C-o> unite#do_action('start')
		nnoremap 	<silent><buffer><expr> <C-i> unite#do_action('preview')
		imap		<silent><buffer><expr> <C-i> unite#do_action('preview')
	endfunction
augroup END


